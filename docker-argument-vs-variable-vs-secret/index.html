<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">
  <meta name=author content="Made Indra">

  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/favicon/site.webmanifest">
<link rel="shortcut icon" href="/assets/favicon/favicon.ico">
<link rel="icon" type="image/png" sizes="192x192" href="/assets/favicon/android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="512x512" href="/assets/favicon/android-chrome-512x512.png">


  <title>Docker Argument vs Variable vs Secret | madeindra.dev</title>
  <meta name="description"
    content="Learn the differences between Docker build arguments, environment variables, and build secrets. Understand when and how to use each for configuring your Dock...">
  <meta name="keywords"
    content="Docker, Container">

  <link rel="canonical" href="https://madeindra.dev/docker-argument-vs-variable-vs-secret/">
  <link rel="alternate" type="application/rss+xml" title="madeindra.dev" href="https://madeindra.dev/feed.xml" />

  <!-- for browsers supporting theme-color -->
  <meta name="theme-color" content="">

  <!-- for fixing -->
  <meta name="format-detection" content="telephone=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="Docker Argument vs Variable vs Secret">
<meta property="og:description"
    content="Learn the differences between Docker build arguments, environment variables, and build secrets. Understand when and how to use each for configuring your Dock...">
<meta property="og:url" content="https://madeindra.dev/docker-argument-vs-variable-vs-secret/">
<meta property="og:site_name" content="madeindra.dev">
<meta property="og:type" content="website">

<meta property="og:image" content="https://madeindra.dev/assets/images/2024-12-07-docker-argument-vs-variable-vs-secret.webp">


<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Docker Argument vs Variable vs Secret">
<meta name="twitter:description"
    content="Learn the differences between Docker build arguments, environment variables, and build secrets. Understand when and how to use each for configuring your Dock...">

<meta property="twitter:domain" content="https://madeindra.dev">
<meta property="twitter:url"
    content="https://madeindra.dev/docker-argument-vs-variable-vs-secret/">
<meta name="twitter:image" content="https://madeindra.dev/assets/images/2024-12-07-docker-argument-vs-variable-vs-secret.webp">


<meta name="twitter:site" content="@madecanggih">


  <link rel="stylesheet" href="/assets/css/main.css">
</head>

<body
  class="min-h-screen flex flex-col transition-colors duration-300 bg-white dark:bg-dark text-gray-900 dark:text-dark-base">
  <header class="py-6">
  <div class="container mx-auto px-4 flex justify-between items-center">
    <!-- Logo and Title -->
    <div class="flex items-center">
      
      <a href="/">
        <img src="https://madeindra.dev/assets/images/logo.webp" alt="Logo" class="h-8 mr-2 block md:hidden" />
      </a>
      
      <h1 class="text-xl font-semibold hidden md:block">
        <a href="/" class="hover:text-gray-600 dark:hover:text-white">
          madeindra.dev
        </a>
      </h1>
    </div>

    <!-- Search Bar-->
    
    <div id="search-bar" class="relative w-1/3">
      <input type="text" id="search-input" placeholder="Search..."
        class="w-full px-4 py-1 border rounded-full focus:outline-none focus:ring-0 bg-white dark:bg-dark transition-colors duration-300">
      <div id="search-results" class="z-[100] absolute left-0 right-0 mt-2 bg-white dark:bg-dark border rounded shadow-lg hidden"
        style="min-width: 150%; left: 50%; transform: translateX(-50%);"></div>
    </div>
    

    <!-- Navigation -->
    <div class="flex items-center space-x-4">
      
      <!-- Desktop Navigation -->
      <nav class="hidden md:block">
        <ul class="flex space-x-6 font-normal">
          
          <li><a href="/" class="hover:text-gray-600 dark:hover:text-white">Home</a></li>
          

          
          <li><a href="/about" class="hover:text-gray-600 dark:hover:text-white">About</a></li>
          
        </ul>
      </nav>

      <!-- Burger Menu Icon -->
      <div class="relative">
        <button id="burger-menu" class="md:hidden p-2 rounded-full" aria-label="Toggle mobile menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
          </svg>
        </button>

        <!-- Mobile Menu (Positioned absolutely) -->
        <div id="mobile-menu" class="hidden md:hidden absolute mt-2 w-24 bg-white dark:bg-dark border rounded shadow-lg z-50">
          <nav>
            <ul class="py-2 font-normal">
              
              <li><a href="/" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700">Home</a></li>
              

              
              <li><a href="/about" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700">About</a></li>
              
            </ul>
          </nav>
        </div>
      </div>

      <button id="theme-toggle" class="p-2 rounded-full" aria-label="Toggle theme to dark or light mode">
        <svg id="theme-toggle-dark-icon" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" stroke-width="0" stroke="currentColor" class="w-5 h-5 hidden" >
          <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z" />
        </svg>
        
        <svg id="theme-toggle-light-icon" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"  stroke-width="1.5" stroke="currentColor" class="w-5 h-5 hidden" >
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
        </svg>
      </button>

    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      const burgerMenu = document.getElementById('burger-menu');
      const mobileMenu = document.getElementById('mobile-menu');

      burgerMenu.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
      });

      document.addEventListener('click', (event) => {
        if (!burgerMenu.contains(event.target) && !mobileMenu.contains(event.target)) {
          mobileMenu.classList.add('hidden');
        }
      });
    });
  </script>
</header>

<main class="container mx-auto px-4 flex-grow">

    <div class="relative max-w-prose mb-6 mx-auto">
        <!-- Featured Image -->
        
        <div class="relative overflow-hidden rounded">
            
            <img src="https://madeindra.dev/assets/images/2024-12-07-docker-argument-vs-variable-vs-secret.webp" alt="Featured image" class="w-full h-[40vh] md:h-[50vh] object-cover">
            

            <!-- Black Overlay -->
            <div class="absolute inset-0 bg-black bg-opacity-50"></div>
        </div>
        


        <!-- Title Overlay -->
        <div
            class="absolute bottom-0 left-0 right-0 p-6 text-white">
            <div class="flex items-center space-x-1 md:space-x-2 text-sm mb-2">
                <span>07 Dec 2024</span>
                <span>•</span>
                <span>8 min read</span>
                <span>•</span>
                <span
                    class="">
                    Development
                </span>
            </div>
            <h1 class="text-2xl md:text-4xl font-bold">Docker Argument vs Variable vs Secret</h1>
        </div>
    </div>

    <article class="prose dark:prose-invert prose-img:mx-auto max-w-prose mx-auto space-y-6 sm:text-lg leading-relaxed">
        <p>You might be wondering how to pass a value while building a Docker image. I’ve been there; in fact, I still revisit this topic from time to time. So I want to dedicate a post to building an image with arguments, variables, and secrets.</p>

<p>Let’s start with a simple Dockerfile with multiple stages:</p>

<div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> golang:1.23</span>
<span class="k">WORKDIR</span><span class="s"> /src</span>
<span class="k">COPY</span><span class="s"> &lt;&lt;EOF ./main.go</span>
package main

import "fmt"

func main() {
  fmt.Println("hello, world")
}
EOF
<span class="k">RUN </span>go build <span class="nt">-o</span> /bin/hello ./main.go

<span class="k">FROM</span><span class="s"> scratch</span>
<span class="k">COPY</span><span class="s"> --from=0 /bin/hello /bin/hello</span>
<span class="k">CMD</span><span class="s"> ["/bin/hello"]</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">FROM</code> statements you saw in the example above define stages. The first one builds the file, and the second runs the built binary.</p>

<p>Now let’s talk about build arguments and environment variables. Build arguments in Docker are closely related to environment variables; they are written as <code class="language-plaintext highlighter-rouge">ARG</code> and <code class="language-plaintext highlighter-rouge">ENV</code>, respectively. They are used to pass information to the build process.</p>

<h2 id="build-arguments">Build Arguments</h2>

<p>The way you use <code class="language-plaintext highlighter-rouge">ARG</code> is by defining it either before the stage (a.k.a Global Scope) or inside the stage (a.k.a Local Scope).</p>

<p>The benefit of using <code class="language-plaintext highlighter-rouge">ARG</code> is we can build the image in different way without editing the <code class="language-plaintext highlighter-rouge">Dockerfile</code>.</p>

<p>The value of <code class="language-plaintext highlighter-rouge">ARG</code> is only available during the build process and will not be available when the image is running as a container, unless it is explicitly passed.</p>

<p>I recommend using <code class="language-plaintext highlighter-rouge">ARG</code> for configuring builds. For example, to build a different version, or to use different base image.</p>

<p>This is an example of using <code class="language-plaintext highlighter-rouge">ARG</code> to define the base image to be used for the build.</p>

<div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># create argument for image version</span>
<span class="k">ARG</span><span class="s"> GO_VERSION="1.23"</span>

<span class="c"># use argmument</span>
<span class="k">FROM</span><span class="s"> golang:${GO_VERSION}</span>

<span class="c"># rest of the file stay the same as first example</span>
...
</code></pre></div></div>

<p>Try to build the example above, and you will see that it uses <code class="language-plaintext highlighter-rouge">golang:1.23</code></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build <span class="nt">-t</span> example:latest <span class="nb">.</span>
</code></pre></div></div>

<p>But if you pass a different version, let’s say <code class="language-plaintext highlighter-rouge">1.22</code>, it will use <code class="language-plaintext highlighter-rouge">golang:1.22</code> instead.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build <span class="nt">--build-arg</span> <span class="nv">GO_VERSION</span><span class="o">=</span><span class="s2">"1.22"</span> <span class="nt">-t</span> example:latest <span class="nb">.</span>
</code></pre></div></div>

<h3 id="without-default-value">Without Default Value</h3>

<p>We can also just set the argument name without defining the value. This way, the value of the argument will be empty if not provided in the build command.</p>
<div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># create argument without default value</span>
<span class="k">ARG</span><span class="s"> GO_VERSION</span>

<span class="c"># use argmument</span>
<span class="k">FROM</span><span class="s"> golang:${GO_VERSION}</span>

<span class="c"># rest of the file stay the same as first example</span>
...
</code></pre></div></div>

<h3 id="scope">Scope</h3>

<p>If we declare <code class="language-plaintext highlighter-rouge">ARG</code> in the global scope and want to use it inside a stage, <code class="language-plaintext highlighter-rouge">ARG</code> has to be redeclared inside the stage to allow the stage to read the value. There’s no need to write the value again; just the name is enough for the stage to inherit the value.</p>

<p>This version will not work</p>

<div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ARG</span><span class="s"> MESSAGE="helo, world"</span>

<span class="k">FROM</span><span class="s"> golang:1.23</span>
<span class="k">WORKDIR</span><span class="s"> /src</span>
<span class="c"># this will fail</span>
<span class="k">COPY</span><span class="s"> &lt;&lt;EOF ./main.go</span>
package main

import "fmt"

func main() {
  fmt.Println("${MESSAGE}")
}
EOF
<span class="k">RUN </span>go build <span class="nt">-o</span> /bin/hello ./main.go

<span class="c"># rest of the file stay the same as first example</span>
...
</code></pre></div></div>

<p>With redeclaration, it now works perfectly.</p>

<div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ARG</span><span class="s"> MESSAGE="helo, world"</span>

<span class="k">FROM</span><span class="s"> golang:1.23</span>
<span class="c"># inherit the arg from global scope</span>
<span class="k">ARG</span><span class="s"> MESSAGE </span>
<span class="k">WORKDIR</span><span class="s"> /src</span>
<span class="k">COPY</span><span class="s"> &lt;&lt;EOF ./main.go</span>
package main

import "fmt"

func main() {
  fmt.Println("${MESSAGE}")
}
EOF
<span class="k">RUN </span>go build <span class="nt">-o</span> /bin/hello ./main.go

<span class="c"># rest of the file stay the same as first example</span>
...
</code></pre></div></div>

<h2 id="environment-variables">Environment Variables</h2>

<p>The way you use <code class="language-plaintext highlighter-rouge">ENV</code> is by defining it inside the stage (a.k.a Local Scope).</p>

<p>The benefit of using <code class="language-plaintext highlighter-rouge">ENV</code> is we can configure the way our container run.</p>

<p>The value of <code class="language-plaintext highlighter-rouge">ENV</code> available during build process and when the image is running as container.</p>

<p>I recommend using <code class="language-plaintext highlighter-rouge">ENV</code> for configuring runtime. For example, to set API endpoints. I don’t recommend using it for sensitive values like passwords.</p>

<p>To pass environment variables during build, we need to use build arguments. This is why I previously said they are closely related.</p>

<div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ARG</span><span class="s"> USER</span>

<span class="k">FROM</span><span class="s"> golang:1.23</span>
<span class="k">WORKDIR</span><span class="s"> /src</span>
<span class="k">COPY</span><span class="s"> &lt;&lt;EOF ./main.go</span>
package main

import (
  "fmt"
  "os"
)

func main() {
  fmt.Println("Hello", os.Getenv("USER_NAME"))
}
EOF
<span class="k">RUN </span>go build <span class="nt">-o</span> /bin/hello ./main.go

<span class="k">FROM</span><span class="s"> scratch</span>
<span class="c"># inherit &amp; copy the arg from global scope</span>
<span class="k">ARG</span><span class="s"> USER </span>
<span class="k">ENV</span><span class="s"> USER_NAME=${USER}</span>
<span class="k">COPY</span><span class="s"> --from=0 /bin/hello /bin/hello</span>
<span class="k">CMD</span><span class="s"> ["/bin/hello"]</span>
</code></pre></div></div>

<p>Now, after building it, the environment variables will be available in the container, and they can be accessed programmatically (<code class="language-plaintext highlighter-rouge">os.Getenv("ENV_NAME")</code> in Go or <code class="language-plaintext highlighter-rouge">process.env.ENV_NAME</code> in Node.js).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build <span class="nt">--build-arg</span> <span class="nv">USER</span><span class="o">=</span><span class="s2">"example"</span> <span class="nt">-t</span> example:latest <span class="nb">.</span>
</code></pre></div></div>

<p>If you are wondering why the <code class="language-plaintext highlighter-rouge">USER_NAME</code> is called by the code in the first stage (build), but the environment variable is copied to the second stage (run), I have an answer for you.</p>

<p>This is because the first stage does not need the environment variables to be present; it will still compile. Once compiled, the binary runs in the second stage, which is where we want the environment variables to be present. Hence, we copied them to the second stage and not the first stage.</p>

<h2 id="build-argument-vs-environment-variables">Build Argument vs Environment Variables</h2>

<p>So here’s a TL;DR version of Build Arguments vs Environment Variables.</p>

<table>
  <thead>
    <tr>
      <th>Aspect</th>
      <th>Build Arguments (ARG)</th>
      <th>Environment Variables (ENV)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Declaration</td>
      <td>Using <code class="language-plaintext highlighter-rouge">ARG</code> keyword</td>
      <td>Using <code class="language-plaintext highlighter-rouge">ENV</code> keyword</td>
    </tr>
    <tr>
      <td>Scope</td>
      <td>Can be Global or Local (stage)</td>
      <td>Local (stage) only</td>
    </tr>
    <tr>
      <td>Availability</td>
      <td>Only during build time (unless explicitly passed)</td>
      <td>During build time and container runtime</td>
    </tr>
    <tr>
      <td>Best Used For</td>
      <td>Build configurations (versions, base images)</td>
      <td>Runtime configurations (API endpoints)</td>
    </tr>
  </tbody>
</table>

<h2 id="build-secrets">Build Secrets</h2>

<p>Why would there be build secrets when build arguments and environment variables already exist?</p>

<p>Well, they are for storing sensitive information like passwords or API keys. By using build secrets, the sensitive information will not be exposed.</p>

<p>Let’s take an example of passing an API key when building a frontend app in JavaScript:</p>

<div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ARG</span><span class="s"> SECRET_API_KEY</span>

<span class="k">FROM</span><span class="w"> </span><span class="s">node:20</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="s">build</span>

<span class="k">WORKDIR</span><span class="s"> /app</span>
<span class="k">COPY</span><span class="s"> package*.json ./</span>

<span class="k">RUN </span>npm <span class="nb">install</span>
<span class="k">COPY</span><span class="s"> . .</span>
<span class="k">ARG</span><span class="s"> SECRET_API_KEY</span>
<span class="k">RUN </span><span class="nv">SECRET_API_KEY</span><span class="o">=</span><span class="k">${</span><span class="nv">SECRET_API_KEY</span><span class="k">}</span> <span class="se">\
</span>    npm run build

<span class="k">FROM</span><span class="s"> node:20</span>
<span class="k">RUN </span>npm <span class="nb">install</span> <span class="nt">-g</span> serve
<span class="k">COPY</span><span class="s"> --from=build /app/dist ./dist</span>
<span class="k">EXPOSE</span><span class="s"> 3000</span>
<span class="k">CMD</span><span class="s"> ["serve", "-s", "dist", "-l", "3000"]</span>
</code></pre></div></div>

<p>And build it by passing the secret using an argument:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build <span class="nt">--build-arg</span> <span class="nv">SECRET_API_KEY</span><span class="o">=</span><span class="s2">"example"</span> <span class="nt">-t</span> example:latest <span class="nb">.</span>
</code></pre></div></div>

<p>Yeah, it did work with build arguments, and even if we pass that argument to an environment variable before using it in the build, it will still work.</p>

<p>The problem is we are leaking sensitive information. Docker will also print a warning message about this.</p>

<p>Let’s change the implementation to use build secrets.</p>

<div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="w"> </span><span class="s">node:20-alpine</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">build</span>

<span class="k">WORKDIR</span><span class="s"> /app</span>
<span class="k">COPY</span><span class="s"> package*.json ./</span>

<span class="k">RUN </span>npm <span class="nb">install</span>
<span class="k">COPY</span><span class="s"> . .</span>
<span class="k">RUN </span><span class="nt">--mount</span><span class="o">=</span><span class="nb">type</span><span class="o">=</span>secret,id<span class="o">=</span>SECRET_API_KEY <span class="se">\
</span>    <span class="nv">SECRET_API_KEY</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> /run/secrets/SECRET_API_KEY<span class="si">)</span> <span class="se">\
</span>    npm run build

<span class="k">FROM</span><span class="s"> node:20-alpine</span>
<span class="k">RUN </span>npm <span class="nb">install</span> <span class="nt">-g</span> serve
<span class="k">COPY</span><span class="s"> --from=build /app/dist ./dist</span>
<span class="k">EXPOSE</span><span class="s"> 3000</span>
<span class="k">CMD</span><span class="s"> ["serve", "-s", "dist", "-l", "3000"]</span>
</code></pre></div></div>

<p>We will also change the build command and add the environment variable to the shell before executing the build command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export SECRET_API_KEY=example
docker build --secret id=SECRET_API_KEY -t example:latest .
</code></pre></div></div>

<p>No more warning messages, and we successfully pass the secret to the build. Yay!</p>

<h2 id="environment-variables-vs-build-secrets">Environment Variables vs Build Secrets</h2>

<p>So here’s a TL;DR version of Environment Variables vs Build Secrets.</p>

<table>
  <thead>
    <tr>
      <th>Aspect</th>
      <th>Environment Variables (ENV)</th>
      <th>Build Secrets</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Declaration</td>
      <td>Using <code class="language-plaintext highlighter-rouge">ENV</code> keyword</td>
      <td>Using <code class="language-plaintext highlighter-rouge">--mount=type=secret</code></td>
    </tr>
    <tr>
      <td>Visibility</td>
      <td>Visible in image history and container</td>
      <td>Not visible in image history</td>
    </tr>
    <tr>
      <td>Security Level</td>
      <td>Lower (plaintext)</td>
      <td>Higher (secure during build)</td>
    </tr>
    <tr>
      <td>Best Used For</td>
      <td>Non-sensitive configuration</td>
      <td>Sensitive data (API keys, credentials)</td>
    </tr>
  </tbody>
</table>

<hr />

<p>Photo by <a href="https://unsplash.com/@carrier_lost?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash">Ian Taylor on Unsplash</a></p>


    </article>

    
    <div class="max-w-prose mx-auto border-t border-gray-200 my-12"></div>
    <section class="max-w-prose mx-auto">
        <script src="https://giscus.app/client.js"
        data-repo="madeindra/madeindra.github.io"
        data-repo-id="R_kgDOMxraRQ"
        data-category="Announcements"
        data-category-id="DIC_kwDOMxraRc4CjK1D"
        data-mapping="pathname"
        data-strict="1"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        id="gitcus"
        async>
</script>
    </section>
    
</main>

<footer class="py-6">
    <div class="container mx-auto px-4">
        <!-- Divider -->
        <div class="border-t border-gray-200 mb-4"></div>

        <!-- Footer -->
        <div class="flex justify-between items-center">
            <div class="text-sm text-gray-600 dark:text-gray-400">
                madeindra.dev © 2025
            </div>
            
            <div class="text-sm text-gray-600 dark:text-gray-400">
                
                <a href="/sitemap.xml" class="hover:text-gray-900 dark:hover:text-gray-100">Sitemap</a>
                
        
                
                <span class="px-2">|</span>
                
        
                
                <a href="/feed.xml" class="hover:text-gray-900 dark:hover:text-gray-100">RSS</a>
                
            </div>
        </div>
    </div>
</footer>

  <script type="text/javascript">
    const themeToggleBtn = document.getElementById('theme-toggle');
    const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
    const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

    const themeColorMetaTag = document.querySelector('meta[name="theme-color"]');

    const themeComment = document.getElementById('gitcus');

    // add click listener to theme toggle button
    themeToggleBtn?.addEventListener('click', function () {
        setTheme(!document?.documentElement?.classList?.contains('dark'));
    });

    // set initial theme
    if (sessionStorage.theme === 'dark' || (!('theme' in sessionStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        setTheme(true);
    } else {
        setTheme(false);
    }

    function setTheme(isDark) {
        if (isDark) {
            sessionStorage.theme = 'dark';

            document.documentElement?.classList?.add('dark');

            themeToggleDarkIcon?.classList?.add('hidden');
            themeToggleLightIcon?.classList?.remove('hidden');

            themeColorMetaTag.setAttribute('content', '#1A1A1A');

            if (themeComment) {
                themeComment.setAttribute('data-theme', 'noborder_dark');
            }
        } else {
            sessionStorage.theme = 'light';

            document.documentElement?.classList?.remove('dark');

            themeToggleDarkIcon?.classList?.remove('hidden');
            themeToggleLightIcon?.classList?.add('hidden');

            themeColorMetaTag.setAttribute('content', '#FFFFFF');

            if (themeComment) {
                themeComment.setAttribute('data-theme', 'noborder_light');
            }
        }
    }
</script>

  
  <script type="text/javascript">
  let searchData = [];

  // Fetch search data
  fetch('/search.json')
    .then(response => response.json())
    .then(data => {
      searchData = data;
    });

  const searchBar = document.getElementById('search-bar');
  const searchInput = document.getElementById('search-input');
  const searchResults = document.getElementById('search-results');

  searchInput?.addEventListener('input', debounce(handleSearch, 300));

  function setResultInnerHTML(content) {
    searchResults.innerHTML = content;
  }

  function addResultClass(className) {
    searchResults.classList.add(className);
  }

  function removeResultClass(className) {
    searchResults.classList.remove(className);
  }

  function handleSearch() {
    const query = searchInput.value.toLowerCase();

    // don't process 1 character
    if (query.length < 2) {
      setResultInnerHTML('');
      addResultClass('hidden');

      return;
    }

    const matches = searchData
      .map(item => ({
        item,
        score: fuzzyMatch(query, item.title.toLowerCase())
      }))
      .filter(({ score }) => score > 0.3)
      .sort((a, b) => b.score - a.score)
      .slice(0, 5);

    renderResults(matches);
  }

  function fuzzyMatch(query, text) {
    let score = 0;
    let textIndex = 0;

    for (let i = 0; i < query.length; i++) {
      const index = text.indexOf(query[i], textIndex);
      if (index === -1) return 0;
      score += 1 / (index - textIndex + 1);
      textIndex = index + 1;
    }

    return score / query.length;
  }

  function renderResults(matches) {
    let resultInnerHTML;
    if (matches.length === 0) {
      resultInnerHTML = '<p class="p-2 text-gray-500 dark:text-gray-500">No results found</p>';
    } else {
      resultInnerHTML = matches
        .map(({ item }) => `
            <a href="${item.url}" class="block p-2 hover:bg-gray-200 dark:hover:bg-gray-800">
              <h3 class="font-semibold">${item.title}</h3>
              <p class="text-sm text-gray-600 dark:text-gray-400">${item.description}</p>
            </a>
          `)
        .join('');
    }

    setResultInnerHTML(resultInnerHTML);
    removeResultClass('hidden');
  }

  function debounce(func, delay) {
    let timeoutId;
    return function (...args) {
      clearTimeout(timeoutId);
      timeoutId = setTimeout(() => func.apply(this, args), delay);
    };
  }

  // hide search results on click
  document?.addEventListener('click', (event) => {
    if (!searchInput.contains(event.target) && !searchResults.contains(event.target)) {
      searchResults.classList.add('hidden');
    }
  });
</script>
  
</body>

</html>